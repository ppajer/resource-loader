function ResourceLoader(a){this.errorType=a.errors||!0,this.resourcesToLoad=a.resources||[],this.loadOnReady=a.onReady||!0,this.loadedResources=[],this.attachEventHandler=function(){"complete"===document.readyState&&this.preload()},this.bindLoad=function(){this.loadOnReady?document.addEventListener?document.addEventListener("DOMContentLoaded",this.preload.bind(this)):document.attachEvent("onreadystatechange",this.attachEventHandler.bind(this)):window.onload=this.preload},this.preload=function(){if(this.resourcesToLoad.length)for(var a=0;a<this.resourcesToLoad.length;a++)this.load(this.resourcesToLoad[a])},this.load=function(a){var b;if(!a.type||!a.url){if(this.errors)throw new Error("resource.type and resource.url are both mandatory!");console.log("Error: resource.type and resource.url are both mandatory!",a)}return"video"===a.type&&(b=document.createElement("video"),b.src=a.url,b.preload=!0),"audio"===a.type&&(b=new Audio,b.src=a.url,b.preload=!0),"image"===a.type&&(b=new Image,b.src=a.url),"css"===a.type&&(b=document.createElement("style"),b.type="text/css",b.href=a.url),"js"===a.type&&(b=document.createElement("script"),b.type="text/javascript",b.src=a.url),this.loadedResources.push(b),b},this.bindLoad()}
